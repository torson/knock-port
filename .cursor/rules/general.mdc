---
description: 
globs: 
alwaysApply: true
---

# Workflow Policies

1. **Reflect on Tool Results**
   After receiving tool results, carefully reflect on their quality and determine optimal next steps before proceeding. Use your thinking to plan and iterate based on this new information, and then take the best next action.

2. **Parallel Tool Invocation**
   For maximum efficiency, whenever you need to perform multiple independent operations, invoke all relevant tools simultaneously rather than sequentially.

3. **Full Effort on Complex Tasks**
   When a task is complex, don't hold back - give it your all.

4. **Cleanup Temporary Files**
   If you create any temporary new files, scripts, or helper files for iteration, clean up these files by removing them at the end of the task.

5. **Python virtual environment**
   When running any Python script/app first check if `mamba` command exists. If it does don't set PIP_BREAK_SYSTEM_PACKAGES=1 before execution. Instead activate the Mamba virtual environment with `mamba activate knockport` - run this before running python directly or any bash script that is running python - for example `tests/run_docker_tests.sh`.

6. **Running tests**
   Run tests with `tests/run_docker_tests.sh` . For running tests for specific firewall type (iptables, nftables, vyos) set individual envvars to true before running : RUN_TESTS_ROUTING_TYPE_IPTABLES=true , RUN_TESTS_ROUTING_TYPE_NFTABLES=true , RUN_TESTS_ROUTING_TYPE_VYOS=true . By default all 3 types are tested, but if you make a code change for specific firewall type (iptables let's say), then set the envvar for that type : `RUN_TESTS_ROUTING_TYPE_IPTABLES=true tests/run_docker_tests.sh`.